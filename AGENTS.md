# BTC 量化交易策略專案 - 核心原則

## 核心架構組件

### 1. 後端服務器
- 執行策略的即時運算和信號生成
- 發送通知到目標節點（交易API、Discord等通訊管道）
- 提供API接口供前端和外部系統調用

### 2. 前端Dashboard
- 回測結果視覺化（統計數據、績效指標）
- K線圖表顯示交易進出場時間和價格
- 策略對比和性能監控界面

### 3. 數據回測引擎
- 可使用自建框架或既有工具（如backtrader）
- 支援多時間框架（timeframe）（不一定每個策略都要使用）和滾動窗口驗證
- 完整的績效評估和風險分析

### 4. 策略存放庫
- 統一的策略抽象類別作為基底
- 所有策略實現放置於`/strategies`目錄
- 標準化的策略接口和執行流程

## 品質標準

### 策略績效要求
- **評估函數**: 要為每個策略設計評估函數，以年化報酬為基底，透過夏普比率、最大回撤、最大虧損、最大連續虧損、獲利因子或者其他高階數據來進行懲罰或加分

### 技術架構原則
- **機器學習驅動（可選，也可以單純用網格搜索找好用的技術指標組合，但還是要評估這個指標的參數在不同時間的泛化度，因為BTC這類資產的特性隨時間和政府規則的變動遷移較明顯）**: 以XGBoost等ML模型為核心
- **並行處理**: 計算密集任務支援多核心/GPU加速
- **模組化設計**: 組件職責單一，易於維護和擴展

## 開發規範

### 程式碼風格
- **註解語言**: 繁體中文
- **日誌語言**: 英文
- **日誌等級**: INFO用於重要資訊，DEBUG用於調試
- **輸出目錄**: 結果統一輸出到該策略的 `results`目錄

### 開發原則
- **漸進開發**: 重要功能需經確認後實作
- **實際驅動**: 基於真實數據和回測結果做決策
- **安全第一**: 絕不提交API keys等敏感資訊到版本控制

### 品質控制
- **完整測試**: 關鍵功能必須有驗證機制
- **錯誤處理**: 穩定的異常捕獲和錯誤恢復
- **性能監控**: 系統運行狀態持續追蹤

## 最終目標

### 核心功能
- 多策略並行運行（非優先的實現目標）和即時比較 -> 即時訊號產生後，務必確保回測時該指標真的也會出現，若兩者出現差異則可能白作工 
- 實時交易信號生成和執行
- 7x24小時穩定運行能力

---
*這些是專案的核心準則，所有開發工作必須遵循這些原則。*

## 中文檔案讀取（UTF‑8）
- 在本專案以 Codex CLI/PowerShell 檢視含中文的文字檔，請使用 `scripts/cat_utf8.ps1`，強制以 UTF‑8 解碼並輸出，避免亂碼。
  - 範例：
    - `powershell -File scripts/cat_utf8.ps1 -Path README.md -Head 60`
    - `powershell -File scripts/cat_utf8.ps1 -Path strategies/stats_based_v0/feature_engineer.py`
- 若臨時需要直接以 PowerShell 讀檔，請同一行設定輸出與編碼：
  - `[Console]::OutputEncoding = New-Object System.Text.UTF8Encoding($false); Get-Content -LiteralPath <file> -Encoding UTF8 -TotalCount 60`
- 內容搜尋仍建議用 `rg`；需要顯示檔案內容時，再以上述 UTF‑8 方法開檔。
